<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="udon">

	<!-- select 태그 3개 속성 id, resultType, parameterType id : 사용할 명칭(필수항목), 현재 
		매퍼에서 유일한 이름 사용 resultType : 조회 결과값 저장하기 위한 데이터 타입(1개 데이터에 대한 타입지정) parameterType 
		: 전달 받은 파라미터 데이터의 타입 지정(선택적) -->
	<!-- 전체 게시글 개수 조회 -->
	<select id="totalCount" resultType="int">
		SELECT COUNT(*) AS CNT FROM
		BBS_T
	</select>

	<!-- 페이지에 해당하는 게시글 조회 -->
	<select id="list" resultType="membervo" parameterType="map">
		SELECT *
		FROM (SELECT ROWNUM R_NUM, B.*
		FROM (SELECT *
		FROM BBS_T
		ORDER BY B_IDX DESC
		) B
		)
		WHERE R_NUM BETWEEN #{begin} AND #{end}
	</select>
	
	<select id="view" resultType="membervo" parameterType="int">
		SELECT *
		FROM BBS_T
		WHERE B_IDX = #{b_idx}
	</select>

	<insert id="insertMember" parameterType="com.udon.vo.MemberVo">
		INSERT INTO MEMBER
		(MEMBER_ID, MEMBER_PW, MEMBER_NAME, REGION_ID) 
		VALUES (#{member_id}, #{member_pw}, #{member_name}, #{region_id})
	</insert>
	
	<select id="commList" resultType="com.udon.vo.CommentVO" parameterType="int">
		SELECT C_IDX, WRITER, CONTENT, PWD, WRITE_DATE, IP, B_IDX
		FROM COMMENT_T
		WHERE B_IDX = #{b_idx} 
		ORDER BY WRITE_DATE DESC
	</select>
</mapper>







